apiVersion: v1
items:
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      meta.helm.sh/release-name: anomalo
      meta.helm.sh/release-namespace: anomalo
    creationTimestamp: "2025-08-29T02:31:09Z"
    generation: 1
    labels:
      anomalo.com/customer: joe-test-1
      anomalo.com/egress: "true"
      anomalo.com/internal: "false"
      anomalo.com/pre-sales: "false"
      anomalo.com/stage: dev
      app: anomalo-updater
      app.kubernetes.io/managed-by: Helm
      com.anomalo/egress: "true"
    name: anomalo-updater
    namespace: anomalo
    resourceVersion: "233859099"
    uid: 14ccd1c6-cf5f-4d15-84d4-9d4b3ab96cfc
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 3
    selector:
      matchLabels:
        app: anomalo-updater
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          kubectl.kubernetes.io/default-container: anomalo-updater
        creationTimestamp: null
        labels:
          anomalo.com/customer: joe-test-1
          anomalo.com/egress: "true"
          anomalo.com/internal: "false"
          anomalo.com/pre-sales: "false"
          anomalo.com/role: updater
          anomalo.com/stage: dev
          app: anomalo-updater
          com.anomalo/egress: "true"
          com.anomalo/role: updater
      spec:
        containers:
        - command:
          - /bin/keel
          env:
          - name: NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: RESTRICTED_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: PROJECT_ID
          - name: PUBSUB
          - name: AUTHENTICATED_WEBHOOKS
            value: "false"
          - name: NOTIFICATION_LEVEL
            value: info
          - name: INSECURE_REGISTRY
            value: "true"
          envFrom:
          - secretRef:
              name: anomalo-env-secrets
          image: public.ecr.aws/anomalo/tools/updater:v1
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /healthz
              port: 9300
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 10
          name: anomalo-updater
          ports:
          - containerPort: 9300
            protocol: TCP
          resources:
            limits:
              cpu: 100m
              memory: 128Mi
            requests:
              cpu: 50m
              memory: 64Mi
          securityContext:
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: tmpfs0
          - mountPath: /data
            name: tmpfs1
          - mountPath: /var/run
            name: tmpfs2
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: anomalo
        serviceAccountName: anomalo
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir:
            medium: Memory
          name: tmpfs0
        - emptyDir:
            medium: Memory
          name: tmpfs1
        - emptyDir:
            medium: Memory
          name: tmpfs2
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2025-08-29T02:31:09Z"
      lastUpdateTime: "2025-08-29T02:31:11Z"
      message: ReplicaSet "anomalo-updater-6c9678ff74" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2025-09-11T23:05:48Z"
      lastUpdateTime: "2025-09-11T23:05:48Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      anomalo.com/managed: "true"
      anomalo.com/timestamp: "2025-09-13T01:50:42.973152+00:00"
      deployment.kubernetes.io/revision: "20"
      descheduler.alpha.kubernetes.io/evict: "true"
      keel.sh/policy: force
      keel.sh/pollSchedule: '@every 1m'
      keel.sh/trigger: poll
      kubernetes.io/change-cause: keel automated update, version joe-test-1 -> joe-test-1
        [2025-09-13T01:24:51Z]
      meta.helm.sh/release-name: anomalo
      meta.helm.sh/release-namespace: anomalo
    creationTimestamp: "2025-08-29T02:31:09Z"
    generation: 968
    labels:
      anomalo.com/customer: joe-test-1
      anomalo.com/egress: "true"
      anomalo.com/internal: "false"
      anomalo.com/pre-sales: "false"
      anomalo.com/queue: control
      anomalo.com/role: worker
      anomalo.com/stage: dev
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: worker
      com.anomalo/egress: "true"
      com.anomalo/role: worker
      io.kompose.service: anomalo-worker-control
    name: anomalo-worker-control
    namespace: anomalo
    resourceVersion: "234742726"
    uid: 2f0c9420-3101-4d6a-864a-7b7ef6398385
  spec:
    progressDeadlineSeconds: 600
    replicas: 0
    revisionHistoryLimit: 3
    selector:
      matchLabels:
        io.kompose.service: anomalo-worker-control
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          anomalo.com/checksum-config: b32eeab61e32e00c6ac8802c54fc5dfc02894053c0ab2517adcb4d1b3080640f
          anomalo.com/checksum-secret: ded343103508fe329882e0de5ea30d268cfd6626aade3168235c9cf176547d54
          keel.sh/policy: force
          keel.sh/pollSchedule: '@every 1m'
          keel.sh/trigger: poll
          keel.sh/update-time: 2025-09-13 01:24:51.316933831 +0000 UTC m=+94743.807354615
          kubectl.kubernetes.io/default-container: worker
        creationTimestamp: null
        labels:
          anomalo.com/customer: joe-test-1
          anomalo.com/egress: "true"
          anomalo.com/internal: "false"
          anomalo.com/pre-sales: "false"
          anomalo.com/queue: control
          anomalo.com/role: worker
          anomalo.com/stage: dev
          app.kubernetes.io/name: worker
          com.anomalo/egress: "true"
          com.anomalo/role: worker
          descheduler.alpha.kubernetes.io/evict: "true"
          io.kompose.service: anomalo-worker-control
      spec:
        containers:
        - args:
          - www/bin/start-worker.sh
          env:
          - name: ANOMALO_SINGLE_PROCESS_PER_WORKER
            value: "true"
          - name: ANOMALO_DEDICATED_CONTROL_QUEUE
            value: "true"
          - name: DG_WEB_SERVER_PORT
            value: "8088"
          - name: DG_WEB_SERVER_CPU_COUNT
            value: "1"
          - name: KUBERNETES_POD
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: KUBERNETES_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: KUBERNETES_SERVICE_ACCOUNT
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.serviceAccountName
          - name: ANOMALO_HELM_CHART_VERSION
            value: 0.24.0
          - name: ANOMALO_WORKER_TYPE
            value: control_worker
          - name: ANOMALO_WORKER_QUEUE
            value: control
          - name: ANOMALO_WORKER_CONCURRENCY
            value: "1"
          - name: ANOMALO_MAX_TASKS_PER_CHILD
            value: "10000"
          - name: ANOMALO_WORKER_WARM_SHUTDOWN
            value: "true"
          envFrom:
          - configMapRef:
              name: anomalo-env
          - secretRef:
              name: anomalo-env-secrets
          image: us-docker.pkg.dev/anomalo-invpc/joe-test-1/deploy-web:joe-test-1
          imagePullPolicy: Always
          lifecycle:
            preStop:
              exec:
                command:
                - /bin/bash
                - -c
                - "TEMP_ROOT=${TMPDIR:-/tmp}\nWORKER_STOPPING_SENTINEL=${TEMP_ROOT}/worker-stopping\necho
                  \"Received TERM signal; writing sentinel at ${WORKER_STOPPING_SENTINEL}\"\necho
                  $(date) >${WORKER_STOPPING_SENTINEL}          "
          name: worker
          resources:
            requests:
              cpu: "1"
              memory: 4Gi
          securityContext:
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: anomalo-tmp
          - mountPath: /usr/src/dquality/logs/
            name: anomalo-logs
          - mountPath: /usr/src/dquality/caches/
            name: anomalo-caches
          - mountPath: /var/run
            name: anomalo-var-run
          - mountPath: /var/lib/anomalo/deployment-config
            name: deployment-config
            readOnly: true
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: anomalo-pull-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: anomalo
        serviceAccountName: anomalo
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir:
            medium: Memory
          name: anomalo-tmp
        - emptyDir:
            medium: Memory
          name: anomalo-logs
        - emptyDir:
            medium: Memory
          name: anomalo-caches
        - emptyDir:
            medium: Memory
          name: anomalo-var-run
        - name: deployment-config
          secret:
            defaultMode: 420
            secretName: anomalo-deployment-config
  status:
    conditions:
    - lastTransitionTime: "2025-08-29T02:31:09Z"
      lastUpdateTime: "2025-09-13T01:24:51Z"
      message: ReplicaSet "anomalo-worker-control-746597f8dd" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2025-09-13T20:02:33Z"
      lastUpdateTime: "2025-09-13T20:02:33Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 968
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      anomalo.com/managed: "true"
      anomalo.com/timestamp: "2025-09-13T01:50:42.975409+00:00"
      deployment.kubernetes.io/revision: "20"
      descheduler.alpha.kubernetes.io/evict: "true"
      keel.sh/policy: force
      keel.sh/pollSchedule: '@every 1m'
      keel.sh/trigger: poll
      kubernetes.io/change-cause: keel automated update, version joe-test-1 -> joe-test-1
        [2025-09-13T01:24:51Z]
      meta.helm.sh/release-name: anomalo
      meta.helm.sh/release-namespace: anomalo
    creationTimestamp: "2025-08-29T02:31:09Z"
    generation: 91
    labels:
      anomalo.com/customer: joe-test-1
      anomalo.com/egress: "true"
      anomalo.com/internal: "false"
      anomalo.com/pre-sales: "false"
      anomalo.com/queue: default
      anomalo.com/role: worker
      anomalo.com/stage: dev
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: worker
      com.anomalo/egress: "true"
      com.anomalo/role: worker
      io.kompose.service: anomalo-worker-default
    name: anomalo-worker-default
    namespace: anomalo
    resourceVersion: "234395438"
    uid: 6cb13b0a-77a4-4ec1-9f06-c15ecbdf785d
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 3
    selector:
      matchLabels:
        io.kompose.service: anomalo-worker-default
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          anomalo.com/checksum-config: b32eeab61e32e00c6ac8802c54fc5dfc02894053c0ab2517adcb4d1b3080640f
          anomalo.com/checksum-secret: ded343103508fe329882e0de5ea30d268cfd6626aade3168235c9cf176547d54
          keel.sh/policy: force
          keel.sh/pollSchedule: '@every 1m'
          keel.sh/trigger: poll
          keel.sh/update-time: 2025-09-13 01:24:51.316977017 +0000 UTC m=+94743.807397802
          kubectl.kubernetes.io/default-container: worker
        creationTimestamp: null
        labels:
          anomalo.com/customer: joe-test-1
          anomalo.com/egress: "true"
          anomalo.com/internal: "false"
          anomalo.com/pre-sales: "false"
          anomalo.com/queue: default
          anomalo.com/role: worker
          anomalo.com/stage: dev
          app.kubernetes.io/name: worker
          com.anomalo/egress: "true"
          com.anomalo/role: worker
          descheduler.alpha.kubernetes.io/evict: "true"
          io.kompose.service: anomalo-worker-default
      spec:
        containers:
        - args:
          - www/bin/start-worker.sh
          env:
          - name: ANOMALO_SINGLE_PROCESS_PER_WORKER
            value: "true"
          - name: ANOMALO_DEDICATED_CONTROL_QUEUE
            value: "true"
          - name: DG_WEB_SERVER_PORT
            value: "8088"
          - name: DG_WEB_SERVER_CPU_COUNT
            value: "1"
          - name: KUBERNETES_POD
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: KUBERNETES_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: KUBERNETES_SERVICE_ACCOUNT
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.serviceAccountName
          - name: ANOMALO_HELM_CHART_VERSION
            value: 0.24.0
          - name: ANOMALO_WORKER_TYPE
            value: normal_worker
          - name: ANOMALO_WORKER_QUEUE
            value: default
          - name: ANOMALO_WORKER_CONCURRENCY
            value: "2"
          - name: ANOMALO_MAX_TASKS_PER_CHILD
            value: "1000"
          - name: ANOMALO_WORKER_WARM_SHUTDOWN
            value: "true"
          envFrom:
          - configMapRef:
              name: anomalo-env
          - secretRef:
              name: anomalo-env-secrets
          image: us-docker.pkg.dev/anomalo-invpc/joe-test-1/deploy-web:joe-test-1
          imagePullPolicy: Always
          lifecycle:
            preStop:
              exec:
                command:
                - /bin/bash
                - -c
                - "TEMP_ROOT=${TMPDIR:-/tmp}\nWORKER_STOPPING_SENTINEL=${TEMP_ROOT}/worker-stopping\necho
                  \"Received TERM signal; writing sentinel at ${WORKER_STOPPING_SENTINEL}\"\necho
                  $(date) >${WORKER_STOPPING_SENTINEL}          "
          name: worker
          resources:
            requests:
              cpu: "1"
              memory: 2Gi
          securityContext:
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: anomalo-tmp
          - mountPath: /usr/src/dquality/logs/
            name: anomalo-logs
          - mountPath: /usr/src/dquality/caches/
            name: anomalo-caches
          - mountPath: /var/run
            name: anomalo-var-run
          - mountPath: /var/lib/anomalo/deployment-config
            name: deployment-config
            readOnly: true
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: anomalo-pull-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: anomalo
        serviceAccountName: anomalo
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir:
            medium: Memory
          name: anomalo-tmp
        - emptyDir:
            medium: Memory
          name: anomalo-logs
        - emptyDir:
            medium: Memory
          name: anomalo-caches
        - emptyDir:
            medium: Memory
          name: anomalo-var-run
        - name: deployment-config
          secret:
            defaultMode: 420
            secretName: anomalo-deployment-config
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2025-08-29T02:31:09Z"
      lastUpdateTime: "2025-09-13T01:28:59Z"
      message: ReplicaSet "anomalo-worker-default-56c85c75c7" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2025-09-13T02:03:17Z"
      lastUpdateTime: "2025-09-13T02:03:17Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 91
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      anomalo.com/managed: "true"
      anomalo.com/timestamp: "2025-09-13T01:50:42.970072+00:00"
      deployment.kubernetes.io/revision: "20"
      keel.sh/policy: force
      keel.sh/pollSchedule: '@every 1m'
      keel.sh/trigger: poll
      kubernetes.io/change-cause: keel automated update, version joe-test-1 -> joe-test-1
        [2025-09-13T01:24:51Z]
      meta.helm.sh/release-name: anomalo
      meta.helm.sh/release-namespace: anomalo
    creationTimestamp: "2025-08-29T02:31:09Z"
    generation: 91
    labels:
      anomalo.com/customer: joe-test-1
      anomalo.com/egress: "true"
      anomalo.com/internal: "false"
      anomalo.com/pre-sales: "false"
      anomalo.com/queue: slow-only
      anomalo.com/role: worker
      anomalo.com/stage: dev
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: worker
      com.anomalo/egress: "true"
      com.anomalo/role: worker
      io.kompose.service: anomalo-worker-long-running
    name: anomalo-worker-long-running
    namespace: anomalo
    resourceVersion: "234390870"
    uid: 6b54079c-4bb1-49bd-a5c3-56ddad38cc6a
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 3
    selector:
      matchLabels:
        io.kompose.service: anomalo-worker-long-running
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          anomalo.com/checksum-config: b32eeab61e32e00c6ac8802c54fc5dfc02894053c0ab2517adcb4d1b3080640f
          anomalo.com/checksum-secret: ded343103508fe329882e0de5ea30d268cfd6626aade3168235c9cf176547d54
          keel.sh/policy: force
          keel.sh/pollSchedule: '@every 1m'
          keel.sh/trigger: poll
          keel.sh/update-time: 2025-09-13 01:24:51.317029869 +0000 UTC m=+94743.807450655
          kubectl.kubernetes.io/default-container: worker
        creationTimestamp: null
        labels:
          anomalo.com/customer: joe-test-1
          anomalo.com/egress: "true"
          anomalo.com/internal: "false"
          anomalo.com/pre-sales: "false"
          anomalo.com/queue: slow-only
          anomalo.com/role: worker
          anomalo.com/stage: dev
          app.kubernetes.io/name: worker
          com.anomalo/egress: "true"
          com.anomalo/role: worker
          io.kompose.service: anomalo-worker-long-running
      spec:
        containers:
        - args:
          - www/bin/start-worker.sh
          env:
          - name: ANOMALO_SINGLE_PROCESS_PER_WORKER
            value: "true"
          - name: ANOMALO_DEDICATED_CONTROL_QUEUE
            value: "true"
          - name: DG_WEB_SERVER_PORT
            value: "8088"
          - name: DG_WEB_SERVER_CPU_COUNT
            value: "1"
          - name: KUBERNETES_POD
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: KUBERNETES_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: KUBERNETES_SERVICE_ACCOUNT
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.serviceAccountName
          - name: ANOMALO_HELM_CHART_VERSION
            value: 0.24.0
          - name: ANOMALO_WORKER_TYPE
            value: long_running_worker
          - name: ANOMALO_WORKER_QUEUE
            value: slow,only
          - name: ANOMALO_WORKER_CONCURRENCY
            value: "1"
          - name: ANOMALO_MAX_TASKS_PER_CHILD
            value: "1"
          - name: ANOMALO_WORKER_WARM_SHUTDOWN
            value: "true"
          envFrom:
          - configMapRef:
              name: anomalo-env
          - secretRef:
              name: anomalo-env-secrets
          image: us-docker.pkg.dev/anomalo-invpc/joe-test-1/deploy-web:joe-test-1
          imagePullPolicy: Always
          lifecycle:
            preStop:
              exec:
                command:
                - /bin/bash
                - -c
                - "TEMP_ROOT=${TMPDIR:-/tmp}\nWORKER_STOPPING_SENTINEL=${TEMP_ROOT}/worker-stopping\necho
                  \"Received TERM signal; writing sentinel at ${WORKER_STOPPING_SENTINEL}\"\necho
                  $(date) >${WORKER_STOPPING_SENTINEL}          "
          name: worker
          resources:
            requests:
              cpu: "1"
              memory: 2Gi
          securityContext:
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: anomalo-tmp
          - mountPath: /usr/src/dquality/logs/
            name: anomalo-logs
          - mountPath: /usr/src/dquality/caches/
            name: anomalo-caches
          - mountPath: /var/run
            name: anomalo-var-run
          - mountPath: /var/lib/anomalo/deployment-config
            name: deployment-config
            readOnly: true
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: anomalo-pull-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: anomalo
        serviceAccountName: anomalo
        terminationGracePeriodSeconds: 21600
        volumes:
        - emptyDir:
            medium: Memory
          name: anomalo-tmp
        - emptyDir:
            medium: Memory
          name: anomalo-logs
        - emptyDir:
            medium: Memory
          name: anomalo-caches
        - emptyDir:
            medium: Memory
          name: anomalo-var-run
        - name: deployment-config
          secret:
            defaultMode: 420
            secretName: anomalo-deployment-config
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2025-08-29T02:31:09Z"
      lastUpdateTime: "2025-09-13T01:30:42Z"
      message: ReplicaSet "anomalo-worker-long-running-84f4876c95" has successfully
        progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2025-09-13T01:48:04Z"
      lastUpdateTime: "2025-09-13T01:48:04Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 91
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      anomalo.com/managed: "true"
      anomalo.com/timestamp: "2025-09-13T01:50:42.969018+00:00"
      deployment.kubernetes.io/revision: "20"
      descheduler.alpha.kubernetes.io/evict: "true"
      keel.sh/policy: force
      keel.sh/pollSchedule: '@every 1m'
      keel.sh/trigger: poll
      kubernetes.io/change-cause: keel automated update, version joe-test-1 -> joe-test-1
        [2025-09-13T01:24:51Z]
      meta.helm.sh/release-name: anomalo
      meta.helm.sh/release-namespace: anomalo
    creationTimestamp: "2025-08-29T02:31:09Z"
    generation: 91
    labels:
      anomalo.com/customer: joe-test-1
      anomalo.com/egress: "true"
      anomalo.com/internal: "false"
      anomalo.com/pre-sales: "false"
      anomalo.com/queue: high
      anomalo.com/role: worker
      anomalo.com/stage: dev
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: worker
      com.anomalo/egress: "true"
      com.anomalo/role: worker
      io.kompose.service: anomalo-worker-quick-high
    name: anomalo-worker-quick-high
    namespace: anomalo
    resourceVersion: "234394753"
    uid: 8b1a60f4-45f1-486e-803f-e6ebeced9ad0
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 3
    selector:
      matchLabels:
        io.kompose.service: anomalo-worker-quick-high
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          anomalo.com/checksum-config: b32eeab61e32e00c6ac8802c54fc5dfc02894053c0ab2517adcb4d1b3080640f
          anomalo.com/checksum-secret: ded343103508fe329882e0de5ea30d268cfd6626aade3168235c9cf176547d54
          keel.sh/policy: force
          keel.sh/pollSchedule: '@every 1m'
          keel.sh/trigger: poll
          keel.sh/update-time: 2025-09-13 01:24:51.317078372 +0000 UTC m=+94743.807499157
          kubectl.kubernetes.io/default-container: worker
        creationTimestamp: null
        labels:
          anomalo.com/customer: joe-test-1
          anomalo.com/egress: "true"
          anomalo.com/internal: "false"
          anomalo.com/pre-sales: "false"
          anomalo.com/queue: high
          anomalo.com/role: worker
          anomalo.com/stage: dev
          app.kubernetes.io/name: worker
          com.anomalo/egress: "true"
          com.anomalo/role: worker
          descheduler.alpha.kubernetes.io/evict: "true"
          io.kompose.service: anomalo-worker-quick-high
      spec:
        containers:
        - args:
          - www/bin/start-worker.sh
          env:
          - name: ANOMALO_SINGLE_PROCESS_PER_WORKER
            value: "true"
          - name: ANOMALO_DEDICATED_CONTROL_QUEUE
            value: "true"
          - name: DG_WEB_SERVER_PORT
            value: "8088"
          - name: DG_WEB_SERVER_CPU_COUNT
            value: "1"
          - name: KUBERNETES_POD
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: KUBERNETES_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: KUBERNETES_SERVICE_ACCOUNT
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.serviceAccountName
          - name: ANOMALO_HELM_CHART_VERSION
            value: 0.24.0
          - name: ANOMALO_WORKER_TYPE
            value: high_worker
          - name: ANOMALO_WORKER_QUEUE
            value: high
          - name: ANOMALO_WORKER_CONCURRENCY
            value: "1"
          - name: ANOMALO_MAX_TASKS_PER_CHILD
            value: "1000"
          - name: ANOMALO_WORKER_WARM_SHUTDOWN
            value: "true"
          envFrom:
          - configMapRef:
              name: anomalo-env
          - secretRef:
              name: anomalo-env-secrets
          image: us-docker.pkg.dev/anomalo-invpc/joe-test-1/deploy-web:joe-test-1
          imagePullPolicy: Always
          lifecycle:
            preStop:
              exec:
                command:
                - /bin/bash
                - -c
                - "TEMP_ROOT=${TMPDIR:-/tmp}\nWORKER_STOPPING_SENTINEL=${TEMP_ROOT}/worker-stopping\necho
                  \"Received TERM signal; writing sentinel at ${WORKER_STOPPING_SENTINEL}\"\necho
                  $(date) >${WORKER_STOPPING_SENTINEL}          "
          name: worker
          resources:
            requests:
              cpu: 100m
              memory: 500Mi
          securityContext:
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: anomalo-tmp
          - mountPath: /usr/src/dquality/logs/
            name: anomalo-logs
          - mountPath: /usr/src/dquality/caches/
            name: anomalo-caches
          - mountPath: /var/run
            name: anomalo-var-run
          - mountPath: /var/lib/anomalo/deployment-config
            name: deployment-config
            readOnly: true
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: anomalo-pull-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: anomalo
        serviceAccountName: anomalo
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir:
            medium: Memory
          name: anomalo-tmp
        - emptyDir:
            medium: Memory
          name: anomalo-logs
        - emptyDir:
            medium: Memory
          name: anomalo-caches
        - emptyDir:
            medium: Memory
          name: anomalo-var-run
        - name: deployment-config
          secret:
            defaultMode: 420
            secretName: anomalo-deployment-config
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2025-08-29T02:31:09Z"
      lastUpdateTime: "2025-09-13T01:29:10Z"
      message: ReplicaSet "anomalo-worker-quick-high-bdbc646ff" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2025-09-13T02:01:36Z"
      lastUpdateTime: "2025-09-13T02:01:36Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 91
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      anomalo.com/managed: "true"
      anomalo.com/timestamp: "2025-09-13T01:50:42.970386+00:00"
      deployment.kubernetes.io/revision: "20"
      descheduler.alpha.kubernetes.io/evict: "true"
      keel.sh/policy: force
      keel.sh/pollSchedule: '@every 1m'
      keel.sh/trigger: poll
      kubernetes.io/change-cause: keel automated update, version joe-test-1 -> joe-test-1
        [2025-09-13T01:24:51Z]
      meta.helm.sh/release-name: anomalo
      meta.helm.sh/release-namespace: anomalo
    creationTimestamp: "2025-08-29T02:31:09Z"
    generation: 123
    labels:
      anomalo.com/customer: joe-test-1
      anomalo.com/egress: "true"
      anomalo.com/internal: "false"
      anomalo.com/pre-sales: "false"
      anomalo.com/queue: low-only
      anomalo.com/role: worker
      anomalo.com/stage: dev
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: worker
      com.anomalo/egress: "true"
      com.anomalo/role: worker
      io.kompose.service: anomalo-worker-quick-low
    name: anomalo-worker-quick-low
    namespace: anomalo
    resourceVersion: "234552937"
    uid: 2cb45c39-5d4c-4a21-b293-34bb332a6b0d
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 3
    selector:
      matchLabels:
        io.kompose.service: anomalo-worker-quick-low
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          anomalo.com/checksum-config: b32eeab61e32e00c6ac8802c54fc5dfc02894053c0ab2517adcb4d1b3080640f
          anomalo.com/checksum-secret: ded343103508fe329882e0de5ea30d268cfd6626aade3168235c9cf176547d54
          keel.sh/policy: force
          keel.sh/pollSchedule: '@every 1m'
          keel.sh/trigger: poll
          keel.sh/update-time: 2025-09-13 01:24:51.317110899 +0000 UTC m=+94743.807531682
          kubectl.kubernetes.io/default-container: worker
        creationTimestamp: null
        labels:
          anomalo.com/customer: joe-test-1
          anomalo.com/egress: "true"
          anomalo.com/internal: "false"
          anomalo.com/pre-sales: "false"
          anomalo.com/queue: low-only
          anomalo.com/role: worker
          anomalo.com/stage: dev
          app.kubernetes.io/name: worker
          com.anomalo/egress: "true"
          com.anomalo/role: worker
          descheduler.alpha.kubernetes.io/evict: "true"
          io.kompose.service: anomalo-worker-quick-low
      spec:
        containers:
        - args:
          - www/bin/start-worker.sh
          env:
          - name: ANOMALO_SINGLE_PROCESS_PER_WORKER
            value: "true"
          - name: ANOMALO_DEDICATED_CONTROL_QUEUE
            value: "true"
          - name: DG_WEB_SERVER_PORT
            value: "8088"
          - name: DG_WEB_SERVER_CPU_COUNT
            value: "1"
          - name: KUBERNETES_POD
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: KUBERNETES_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: KUBERNETES_SERVICE_ACCOUNT
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.serviceAccountName
          - name: ANOMALO_HELM_CHART_VERSION
            value: 0.24.0
          - name: ANOMALO_WORKER_TYPE
            value: low_worker
          - name: ANOMALO_WORKER_QUEUE
            value: low,only
          - name: ANOMALO_WORKER_CONCURRENCY
            value: "1"
          - name: ANOMALO_MAX_TASKS_PER_CHILD
            value: "1"
          - name: ANOMALO_WORKER_WARM_SHUTDOWN
            value: "true"
          envFrom:
          - configMapRef:
              name: anomalo-env
          - secretRef:
              name: anomalo-env-secrets
          image: us-docker.pkg.dev/anomalo-invpc/joe-test-1/deploy-web:joe-test-1
          imagePullPolicy: Always
          lifecycle:
            preStop:
              exec:
                command:
                - /bin/bash
                - -c
                - "TEMP_ROOT=${TMPDIR:-/tmp}\nWORKER_STOPPING_SENTINEL=${TEMP_ROOT}/worker-stopping\necho
                  \"Received TERM signal; writing sentinel at ${WORKER_STOPPING_SENTINEL}\"\necho
                  $(date) >${WORKER_STOPPING_SENTINEL}          "
          name: worker
          resources:
            requests:
              cpu: "1"
              memory: 2Gi
          securityContext:
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: anomalo-tmp
          - mountPath: /usr/src/dquality/logs/
            name: anomalo-logs
          - mountPath: /usr/src/dquality/caches/
            name: anomalo-caches
          - mountPath: /var/run
            name: anomalo-var-run
          - mountPath: /var/lib/anomalo/deployment-config
            name: deployment-config
            readOnly: true
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: anomalo-pull-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: anomalo
        serviceAccountName: anomalo
        terminationGracePeriodSeconds: 21600
        volumes:
        - emptyDir:
            medium: Memory
          name: anomalo-tmp
        - emptyDir:
            medium: Memory
          name: anomalo-logs
        - emptyDir:
            medium: Memory
          name: anomalo-caches
        - emptyDir:
            medium: Memory
          name: anomalo-var-run
        - name: deployment-config
          secret:
            defaultMode: 420
            secretName: anomalo-deployment-config
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2025-08-29T02:31:09Z"
      lastUpdateTime: "2025-09-13T01:28:59Z"
      message: ReplicaSet "anomalo-worker-quick-low-778c468547" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2025-09-13T10:01:38Z"
      lastUpdateTime: "2025-09-13T10:01:38Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 123
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      anomalo.com/managed: "true"
      anomalo.com/timestamp: "2025-09-13T01:50:42.974920+00:00"
      deployment.kubernetes.io/revision: "20"
      descheduler.alpha.kubernetes.io/evict: "true"
      keel.sh/policy: force
      keel.sh/pollSchedule: '@every 1m'
      keel.sh/trigger: poll
      kubernetes.io/change-cause: keel automated update, version joe-test-1 -> joe-test-1
        [2025-09-13T01:24:51Z]
      meta.helm.sh/release-name: anomalo
      meta.helm.sh/release-namespace: anomalo
    creationTimestamp: "2025-08-29T02:31:09Z"
    generation: 92
    labels:
      anomalo.com/customer: joe-test-1
      anomalo.com/egress: "true"
      anomalo.com/internal: "false"
      anomalo.com/pre-sales: "false"
      anomalo.com/queue: refresh-only
      anomalo.com/role: worker
      anomalo.com/stage: dev
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: worker
      com.anomalo/egress: "true"
      com.anomalo/role: worker
      io.kompose.service: anomalo-worker-refresh
    name: anomalo-worker-refresh
    namespace: anomalo
    resourceVersion: "234390866"
    uid: 0a838a28-5295-4a6a-81ee-7d8409247c5d
  spec:
    progressDeadlineSeconds: 600
    replicas: 0
    revisionHistoryLimit: 3
    selector:
      matchLabels:
        io.kompose.service: anomalo-worker-refresh
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          anomalo.com/checksum-config: b32eeab61e32e00c6ac8802c54fc5dfc02894053c0ab2517adcb4d1b3080640f
          anomalo.com/checksum-secret: ded343103508fe329882e0de5ea30d268cfd6626aade3168235c9cf176547d54
          keel.sh/policy: force
          keel.sh/pollSchedule: '@every 1m'
          keel.sh/trigger: poll
          keel.sh/update-time: 2025-09-13 01:24:51.317160029 +0000 UTC m=+94743.807580813
          kubectl.kubernetes.io/default-container: worker
        creationTimestamp: null
        labels:
          anomalo.com/customer: joe-test-1
          anomalo.com/egress: "true"
          anomalo.com/internal: "false"
          anomalo.com/pre-sales: "false"
          anomalo.com/queue: refresh-only
          anomalo.com/role: worker
          anomalo.com/stage: dev
          app.kubernetes.io/name: worker
          com.anomalo/egress: "true"
          com.anomalo/role: worker
          descheduler.alpha.kubernetes.io/evict: "true"
          io.kompose.service: anomalo-worker-refresh
      spec:
        containers:
        - args:
          - www/bin/start-worker.sh
          env:
          - name: ANOMALO_SINGLE_PROCESS_PER_WORKER
            value: "true"
          - name: ANOMALO_DEDICATED_CONTROL_QUEUE
            value: "true"
          - name: DG_WEB_SERVER_PORT
            value: "8088"
          - name: DG_WEB_SERVER_CPU_COUNT
            value: "1"
          - name: KUBERNETES_POD
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: KUBERNETES_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: KUBERNETES_SERVICE_ACCOUNT
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.serviceAccountName
          - name: ANOMALO_HELM_CHART_VERSION
            value: 0.24.0
          - name: ANOMALO_WORKER_TYPE
            value: refresh_worker
          - name: ANOMALO_WORKER_QUEUE
            value: refresh,only
          - name: ANOMALO_WORKER_CONCURRENCY
            value: "1"
          - name: ANOMALO_MAX_TASKS_PER_CHILD
            value: "1000"
          - name: ANOMALO_WORKER_WARM_SHUTDOWN
            value: "true"
          envFrom:
          - configMapRef:
              name: anomalo-env
          - secretRef:
              name: anomalo-env-secrets
          image: us-docker.pkg.dev/anomalo-invpc/joe-test-1/deploy-web:joe-test-1
          imagePullPolicy: Always
          lifecycle:
            preStop:
              exec:
                command:
                - /bin/bash
                - -c
                - "TEMP_ROOT=${TMPDIR:-/tmp}\nWORKER_STOPPING_SENTINEL=${TEMP_ROOT}/worker-stopping\necho
                  \"Received TERM signal; writing sentinel at ${WORKER_STOPPING_SENTINEL}\"\necho
                  $(date) >${WORKER_STOPPING_SENTINEL}          "
          name: worker
          resources:
            requests:
              cpu: "1"
              memory: 4Gi
          securityContext:
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: anomalo-tmp
          - mountPath: /usr/src/dquality/logs/
            name: anomalo-logs
          - mountPath: /usr/src/dquality/caches/
            name: anomalo-caches
          - mountPath: /var/run
            name: anomalo-var-run
          - mountPath: /var/lib/anomalo/deployment-config
            name: deployment-config
            readOnly: true
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: anomalo-pull-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: anomalo
        serviceAccountName: anomalo
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir:
            medium: Memory
          name: anomalo-tmp
        - emptyDir:
            medium: Memory
          name: anomalo-logs
        - emptyDir:
            medium: Memory
          name: anomalo-caches
        - emptyDir:
            medium: Memory
          name: anomalo-var-run
        - name: deployment-config
          secret:
            defaultMode: 420
            secretName: anomalo-deployment-config
  status:
    conditions:
    - lastTransitionTime: "2025-08-29T02:31:13Z"
      lastUpdateTime: "2025-08-29T02:31:13Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2025-08-29T02:31:09Z"
      lastUpdateTime: "2025-09-13T01:24:51Z"
      message: ReplicaSet "anomalo-worker-refresh-76dc59568d" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    observedGeneration: 92
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      anomalo.com/managed: "true"
      anomalo.com/timestamp: "2025-09-13T01:50:42.969670+00:00"
      deployment.kubernetes.io/revision: "20"
      descheduler.alpha.kubernetes.io/evict: "true"
      keel.sh/policy: force
      keel.sh/pollSchedule: '@every 1m'
      keel.sh/trigger: poll
      kubernetes.io/change-cause: keel automated update, version joe-test-1 -> joe-test-1
        [2025-09-13T01:24:51Z]
      meta.helm.sh/release-name: anomalo
      meta.helm.sh/release-namespace: anomalo
    creationTimestamp: "2025-08-29T02:31:09Z"
    generation: 92
    labels:
      anomalo.com/customer: joe-test-1
      anomalo.com/egress: "true"
      anomalo.com/internal: "false"
      anomalo.com/pre-sales: "false"
      anomalo.com/queue: unstructured
      anomalo.com/role: worker
      anomalo.com/stage: dev
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: worker
      com.anomalo/egress: "true"
      com.anomalo/role: worker
      io.kompose.service: anomalo-worker-unstructured
    name: anomalo-worker-unstructured
    namespace: anomalo
    resourceVersion: "234390867"
    uid: 4729d162-5bb9-4b2e-8789-c5becc97ddbe
  spec:
    progressDeadlineSeconds: 600
    replicas: 0
    revisionHistoryLimit: 3
    selector:
      matchLabels:
        io.kompose.service: anomalo-worker-unstructured
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          anomalo.com/checksum-config: b32eeab61e32e00c6ac8802c54fc5dfc02894053c0ab2517adcb4d1b3080640f
          anomalo.com/checksum-secret: ded343103508fe329882e0de5ea30d268cfd6626aade3168235c9cf176547d54
          keel.sh/policy: force
          keel.sh/pollSchedule: '@every 1m'
          keel.sh/trigger: poll
          keel.sh/update-time: 2025-09-13 01:24:51.317196086 +0000 UTC m=+94743.807616869
          kubectl.kubernetes.io/default-container: worker
        creationTimestamp: null
        labels:
          anomalo.com/customer: joe-test-1
          anomalo.com/egress: "true"
          anomalo.com/internal: "false"
          anomalo.com/pre-sales: "false"
          anomalo.com/queue: unstructured
          anomalo.com/role: worker
          anomalo.com/stage: dev
          app.kubernetes.io/name: worker
          com.anomalo/egress: "true"
          com.anomalo/role: worker
          descheduler.alpha.kubernetes.io/evict: "true"
          io.kompose.service: anomalo-worker-unstructured
      spec:
        containers:
        - args:
          - www/bin/start-worker.sh
          env:
          - name: ANOMALO_SINGLE_PROCESS_PER_WORKER
            value: "true"
          - name: ANOMALO_DEDICATED_CONTROL_QUEUE
            value: "true"
          - name: DG_WEB_SERVER_PORT
            value: "8088"
          - name: DG_WEB_SERVER_CPU_COUNT
            value: "1"
          - name: KUBERNETES_POD
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: KUBERNETES_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: KUBERNETES_SERVICE_ACCOUNT
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.serviceAccountName
          - name: ANOMALO_HELM_CHART_VERSION
            value: 0.24.0
          - name: ANOMALO_WORKER_TYPE
            value: unstructured_worker
          - name: ANOMALO_WORKER_QUEUE
            value: unstructured
          - name: ANOMALO_WORKER_CONCURRENCY
            value: "1"
          - name: ANOMALO_MAX_TASKS_PER_CHILD
            value: "1"
          - name: ANOMALO_WORKER_WARM_SHUTDOWN
            value: "true"
          envFrom:
          - configMapRef:
              name: anomalo-env
          - secretRef:
              name: anomalo-env-secrets
          image: us-docker.pkg.dev/anomalo-invpc/joe-test-1/deploy-web:joe-test-1
          imagePullPolicy: Always
          lifecycle:
            preStop:
              exec:
                command:
                - /bin/bash
                - -c
                - "TEMP_ROOT=${TMPDIR:-/tmp}\nWORKER_STOPPING_SENTINEL=${TEMP_ROOT}/worker-stopping\necho
                  \"Received TERM signal; writing sentinel at ${WORKER_STOPPING_SENTINEL}\"\necho
                  $(date) >${WORKER_STOPPING_SENTINEL}          "
          name: worker
          resources:
            requests:
              cpu: "1"
              memory: 16Gi
          securityContext:
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: anomalo-tmp
          - mountPath: /usr/src/dquality/logs/
            name: anomalo-logs
          - mountPath: /usr/src/dquality/caches/
            name: anomalo-caches
          - mountPath: /var/run
            name: anomalo-var-run
          - mountPath: /var/lib/anomalo/deployment-config
            name: deployment-config
            readOnly: true
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: anomalo-pull-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: anomalo
        serviceAccountName: anomalo
        terminationGracePeriodSeconds: 21600
        volumes:
        - emptyDir:
            medium: Memory
          name: anomalo-tmp
        - emptyDir:
            medium: Memory
          name: anomalo-logs
        - emptyDir:
            medium: Memory
          name: anomalo-caches
        - emptyDir:
            medium: Memory
          name: anomalo-var-run
        - name: deployment-config
          secret:
            defaultMode: 420
            secretName: anomalo-deployment-config
  status:
    conditions:
    - lastTransitionTime: "2025-08-29T02:31:13Z"
      lastUpdateTime: "2025-08-29T02:31:13Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2025-08-29T02:31:09Z"
      lastUpdateTime: "2025-09-13T01:24:51Z"
      message: ReplicaSet "anomalo-worker-unstructured-58f5db66bf" has successfully
        progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    observedGeneration: 92
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "20"
      keel.sh/policy: force
      keel.sh/pollSchedule: '@every 1m'
      keel.sh/trigger: poll
      kubernetes.io/change-cause: keel automated update, version joe-test-1 -> joe-test-1
        [2025-09-13T01:24:52Z]
      meta.helm.sh/release-name: anomalo
      meta.helm.sh/release-namespace: anomalo
    creationTimestamp: "2025-08-29T02:31:09Z"
    generation: 21
    labels:
      anomalo.com/customer: joe-test-1
      anomalo.com/internal: "false"
      anomalo.com/pre-sales: "false"
      anomalo.com/role: web-server
      anomalo.com/stage: dev
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: web-server
      com.anomalo/role: web-server
      io.kompose.service: dquality-web
    name: dquality-web
    namespace: anomalo
    resourceVersion: "234395807"
    uid: 95bd1659-82b4-4911-81c3-17d3655df3f9
  spec:
    progressDeadlineSeconds: 600
    replicas: 2
    revisionHistoryLimit: 3
    selector:
      matchLabels:
        io.kompose.service: dquality-web
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          anomalo.com/checksum-config: b32eeab61e32e00c6ac8802c54fc5dfc02894053c0ab2517adcb4d1b3080640f
          anomalo.com/checksum-secret: ded343103508fe329882e0de5ea30d268cfd6626aade3168235c9cf176547d54
          keel.sh/policy: force
          keel.sh/pollSchedule: '@every 1m'
          keel.sh/trigger: poll
          keel.sh/update-time: 2025-09-13 01:24:51.317241038 +0000 UTC m=+94743.807661821
          kubectl.kubernetes.io/default-container: dquality-web
        creationTimestamp: null
        labels:
          anomalo.com/customer: joe-test-1
          anomalo.com/internal: "false"
          anomalo.com/pre-sales: "false"
          anomalo.com/role: web
          anomalo.com/stage: dev
          app.kubernetes.io/name: web
          com.anomalo/role: web
          io.kompose.service: dquality-web
      spec:
        affinity:
          podAntiAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                - key: anomalo.com/role
                  operator: In
                  values:
                  - web
              topologyKey: kubernetes.io/hostname
        containers:
        - args:
          - scripts/go_web.sh
          - web-only
          env:
          - name: ANOMALO_SINGLE_PROCESS_PER_WORKER
            value: "true"
          - name: ANOMALO_DEDICATED_CONTROL_QUEUE
            value: "true"
          - name: DG_WEB_SERVER_PORT
            value: "8088"
          - name: DG_WEB_SERVER_CPU_COUNT
            value: "1"
          - name: KUBERNETES_POD
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: KUBERNETES_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: KUBERNETES_SERVICE_ACCOUNT
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.serviceAccountName
          - name: ANOMALO_HELM_CHART_VERSION
            value: 0.24.0
          envFrom:
          - configMapRef:
              name: anomalo-env
          - secretRef:
              name: anomalo-env-secrets
          image: us-docker.pkg.dev/anomalo-invpc/joe-test-1/deploy-web:joe-test-1
          imagePullPolicy: Always
          name: dquality-web
          ports:
          - containerPort: 8088
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /health_check
              port: 8088
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 60
            successThreshold: 1
            timeoutSeconds: 30
          resources:
            requests:
              cpu: 500m
              memory: 1Gi
          securityContext:
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: anomalo-tmp
          - mountPath: /usr/src/dquality/logs/
            name: anomalo-logs
          - mountPath: /usr/src/dquality/caches/
            name: anomalo-caches
          - mountPath: /var/run
            name: anomalo-var-run
          - mountPath: /var/lib/anomalo/deployment-config
            name: deployment-config
            readOnly: true
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: anomalo-pull-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: anomalo
        serviceAccountName: anomalo
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir:
            medium: Memory
          name: anomalo-tmp
        - emptyDir:
            medium: Memory
          name: anomalo-logs
        - emptyDir:
            medium: Memory
          name: anomalo-caches
        - emptyDir:
            medium: Memory
          name: anomalo-var-run
        - name: deployment-config
          secret:
            defaultMode: 420
            secretName: anomalo-deployment-config
  status:
    availableReplicas: 2
    conditions:
    - lastTransitionTime: "2025-08-29T02:31:09Z"
      lastUpdateTime: "2025-09-13T01:34:02Z"
      message: ReplicaSet "dquality-web-7bd5c69f7b" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2025-09-13T02:04:18Z"
      lastUpdateTime: "2025-09-13T02:04:18Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 21
    readyReplicas: 2
    replicas: 2
    updatedReplicas: 2
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "19"
      keel.sh/policy: force
      keel.sh/pollSchedule: '@every 1m'
      keel.sh/trigger: poll
      kubernetes.io/change-cause: keel automated update, version joe-test-1 -> joe-test-1
        [2025-09-13T01:24:52Z]
      meta.helm.sh/release-name: anomalo
      meta.helm.sh/release-namespace: anomalo
    creationTimestamp: "2025-08-29T02:31:09Z"
    generation: 20
    labels:
      anomalo.com/customer: joe-test-1
      anomalo.com/internal: "false"
      anomalo.com/pre-sales: "false"
      anomalo.com/stage: dev
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: worker-manager
      io.kompose.service: dquality-worker-mgmt
    name: dquality-worker-mgmt
    namespace: anomalo
    resourceVersion: "234390337"
    uid: e9ca0b9d-45e6-4f96-af98-46f719400445
  spec:
    progressDeadlineSeconds: 600
    replicas: 2
    revisionHistoryLimit: 3
    selector:
      matchLabels:
        io.kompose.service: dquality-worker-mgmt
    strategy:
      type: Recreate
    template:
      metadata:
        annotations:
          anomalo.com/checksum-config: b32eeab61e32e00c6ac8802c54fc5dfc02894053c0ab2517adcb4d1b3080640f
          anomalo.com/checksum-secret: ded343103508fe329882e0de5ea30d268cfd6626aade3168235c9cf176547d54
          keel.sh/policy: force
          keel.sh/pollSchedule: '@every 1m'
          keel.sh/trigger: poll
          keel.sh/update-time: 2025-09-13 01:24:51.317270894 +0000 UTC m=+94743.807691678
          kubectl.kubernetes.io/default-container: dquality-worker-mgmt
        creationTimestamp: null
        labels:
          anomalo.com/customer: joe-test-1
          anomalo.com/internal: "false"
          anomalo.com/pre-sales: "false"
          anomalo.com/stage: dev
          app.kubernetes.io/name: worker-manager
          io.kompose.service: dquality-worker-mgmt
      spec:
        containers:
        - args:
          - scripts/go_web.sh
          - worker-mgmt
          env:
          - name: ANOMALO_SINGLE_PROCESS_PER_WORKER
            value: "true"
          - name: ANOMALO_DEDICATED_CONTROL_QUEUE
            value: "true"
          - name: DG_WEB_SERVER_PORT
            value: "8088"
          - name: DG_WEB_SERVER_CPU_COUNT
            value: "1"
          - name: KUBERNETES_POD
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: KUBERNETES_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: KUBERNETES_SERVICE_ACCOUNT
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.serviceAccountName
          - name: ANOMALO_HELM_CHART_VERSION
            value: 0.24.0
          envFrom:
          - configMapRef:
              name: anomalo-env
          - secretRef:
              name: anomalo-env-secrets
          image: us-docker.pkg.dev/anomalo-invpc/joe-test-1/deploy-web:joe-test-1
          imagePullPolicy: Always
          name: dquality-worker-mgmt
          resources:
            requests:
              cpu: "3"
              memory: 14Gi
          securityContext:
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: anomalo-tmp
          - mountPath: /usr/src/dquality/logs/
            name: anomalo-logs
          - mountPath: /usr/src/dquality/caches/
            name: anomalo-caches
          - mountPath: /var/run
            name: anomalo-var-run
          - mountPath: /var/lib/anomalo/deployment-config
            name: deployment-config
            readOnly: true
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: anomalo-pull-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: anomalo
        serviceAccountName: anomalo
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir:
            medium: Memory
          name: anomalo-tmp
        - emptyDir:
            medium: Memory
          name: anomalo-logs
        - emptyDir:
            medium: Memory
          name: anomalo-caches
        - emptyDir:
            medium: Memory
          name: anomalo-var-run
        - name: deployment-config
          secret:
            defaultMode: 420
            secretName: anomalo-deployment-config
  status:
    availableReplicas: 2
    conditions:
    - lastTransitionTime: "2025-09-11T13:07:07Z"
      lastUpdateTime: "2025-09-13T01:30:02Z"
      message: ReplicaSet "dquality-worker-mgmt-8fbd8f74f" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2025-09-13T01:49:24Z"
      lastUpdateTime: "2025-09-13T01:49:24Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 20
    readyReplicas: 2
    replicas: 2
    updatedReplicas: 2
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      meta.helm.sh/release-name: anomalo
      meta.helm.sh/release-namespace: anomalo
    creationTimestamp: "2025-08-29T02:31:09Z"
    generation: 1
    labels:
      anomalo.com/customer: joe-test-1
      anomalo.com/internal: "false"
      anomalo.com/pre-sales: "false"
      anomalo.com/stage: dev
      app.kubernetes.io/managed-by: Helm
      io.kompose.service: redis
    name: redis
    namespace: anomalo
    resourceVersion: "233857442"
    uid: 11cd6994-bbc1-4d04-9742-6a93e91a2952
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 3
    selector:
      matchLabels:
        io.kompose.service: redis
    strategy:
      type: Recreate
    template:
      metadata:
        annotations:
          kubectl.kubernetes.io/default-container: redis
        creationTimestamp: null
        labels:
          anomalo.com/customer: joe-test-1
          anomalo.com/internal: "false"
          anomalo.com/pre-sales: "false"
          anomalo.com/role: cache
          anomalo.com/stage: dev
          io.kompose.service: redis
      spec:
        affinity: {}
        containers:
        - image: public.ecr.aws/anomalo/tools/redis:7
          imagePullPolicy: Always
          name: redis
          ports:
          - containerPort: 6379
            protocol: TCP
          resources:
            requests:
              cpu: "1"
              memory: 1Gi
          securityContext:
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: tmpfs0
          - mountPath: /var/run
            name: tmpfs1
          - mountPath: /data
            name: anomalo-redis-data
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: anomalo-pull-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          fsGroup: 2000
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir: {}
          name: tmpfs0
        - emptyDir: {}
          name: tmpfs1
        - emptyDir: {}
          name: anomalo-redis-data
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2025-08-29T02:31:09Z"
      lastUpdateTime: "2025-08-29T02:31:12Z"
      message: ReplicaSet "redis-5fc897bf4" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2025-09-11T23:03:02Z"
      lastUpdateTime: "2025-09-11T23:03:02Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
kind: List
metadata:
  resourceVersion: ""
